=luadec v2.1 r80 by viruscamp=

基于 luadec.luaforge.net 和 luadec51.luaforge.net

http://code.google.com/p/luadec

viruscamp+luadec@gmail.com

如果 luadec.exe 崩溃了，试试 luadec_memwatch.exe ，然后把导致崩溃的lua文件和memwatch.log 发给我。

----
==改进:==
  # 完整table支持，NEWTABLE, SETLIST, SETTABLE
  # 改进的各种循环结构支持(循环结构算法彻底改变)
  # 改进的disassemble显示
  # 直接读取lua源文件
  # 提供参数用于反编译部分文件,跳过可能导致崩溃的部分
  # 处理大于255个函数的文件
  # 改进程序稳定性,减少程序崩溃和内存泄漏
  # 输出255及以上连续的变量赋值时不再崩溃

----
==用法:==
  # 反编译编译后的lua文件
    luadec abc.luac
  # 直接对源文件用，内部会编译后再反编译
    luadec abc.lua
  # 生成汇编代码
    luadec -dis abc.lua
  # -pn 选项用于显示代码结构 
    {{{
luadec -pn test.lua
0
 1 
  1_1
 2
    }}}
  # -nf 选项用于然后可以反编译指定的函数 (函数 1 包含 1_1)
    luadec -nf 1 test.lua
  # -nf -dn 选项同时使用 反编译指定的函数但不包括下级函数(函数 1 不包含 1_1)
    luadec -dn -nf 1 test.lua

----
==已知bug:==
  # "local a,b = ..., ..." 应该是 "local a,b=..." 
  # "local ,a" 应该是 "local a" 
  # if..else 有时会生成 "do return end" , 应该是 "else", 后续语句应该调整到else里 
  # 对复杂的逻辑表达式处理不好, 会产生错误的结果
  # 对strip后的文件处理不好 -s 参数会进行strip后再反编译用于测试

----
==TODO:==
  # if 与 逻辑表达式处理
  # strip 后的 local_guess 先关注 setlist
  # strip 后使用 -a 参数 先关注 setlist